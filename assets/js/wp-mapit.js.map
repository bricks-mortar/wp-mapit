{"version":3,"sources":["wp-mapit.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","addMaps","mapElements","Array","prototype","forEach","mapEl","initialize","mapOptions","center","lat","lng","zoom","streetViewControl","mapTypeControl","panControl","mapCanvas","querySelector","map","google","maps","Map","markers","dataElements","getElementsByClassName","dataEl","dataset","myLatlng","LatLng","fullAddr","locId","locid","locTitle","loctitle","locContent","loccontent","locImage","locimage","infoWindowContent","infoWindowMarkup","marker","Marker","position","title","infowindow","InfoWindow","content","event","addListener","open","infoWindow","push","setMap","window","addDomListener","address","image","document"],"mappings":"CAAA,QAAUA,GAAEC,EAAEC,EAAEC,GAAG,QAASC,GAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,GAAIE,GAAkB,kBAATC,UAAqBA,OAAQ,KAAIF,GAAGC,EAAE,MAAOA,GAAEF,GAAE,EAAI,IAAGI,EAAE,MAAOA,GAAEJ,GAAE,EAAI,IAAIK,GAAE,GAAIC,OAAM,uBAAuBN,EAAE,IAAK,MAAMK,GAAEE,KAAK,mBAAmBF,EAAE,GAAIG,GAAEX,EAAEG,IAAIS,WAAYb,GAAEI,GAAG,GAAGU,KAAKF,EAAEC,QAAQ,SAASd,GAAG,GAAIE,GAAED,EAAEI,GAAG,GAAGL,EAAG,OAAOI,GAAEF,EAAEA,EAAEF,IAAIa,EAAEA,EAAEC,QAAQd,EAAEC,EAAEC,EAAEC,GAAG,MAAOD,GAAEG,GAAGS,QAAkD,IAAI,GAA1CL,GAAkB,kBAATD,UAAqBA,QAAgBH,EAAE,EAAEA,EAAEF,EAAEa,OAAOX,IAAID,EAAED,EAAEE,GAAI,OAAOD,KAAKa,GAAG,SAAST,EAAQU,EAAOJ,GAEvd,YAWA,SAASK,GAAQC,GAGXA,EAAYJ,OAAS,GAEzBK,MAAMC,UAAUC,QAAQR,KAAKK,EAAa,SAAUI,GAElD,QAASC,KAIP,GAAIC,IACFC,QAAUC,IAAK,WAAYC,IAAK,YAChCC,KAAM,EACNC,mBAAmB,EACnBC,gBAAgB,EAChBC,YAAY,GAIVC,EAAYV,EAAMW,cAAc,iBAChCC,EAAM,GAAIC,QAAOC,KAAKC,IAAIL,EAAWR,EAGzCU,GAAII,UAEJ,IAAIC,GAAejB,EAAMkB,uBAAuB,oBAChDrB,OAAMC,UAAUC,QAAQR,KAAK0B,EAAc,SAAUE,GAGnD,GAAIf,GAAMe,EAAOC,QAAmB,UAChCf,EAAMc,EAAOC,QAAoB,WACjCC,EAAW,GAAIR,QAAOC,KAAKQ,OAAOlB,EAAKC,GAQvCkB,GALUJ,EAAOC,QAAuB,cACjCD,EAAOC,QAAoB,WAC1BD,EAAOC,QAAqB,YAC9BD,EAAOC,QAAmB,UACtBD,EAAOC,QAAuB,cAC7BD,EAAOC,QAAyB,iBAG3CI,EAAQL,EAAOC,QAAQK,MACvBC,EAAWP,EAAOC,QAAQO,SAC1BC,EAAaT,EAAOC,QAAQS,WAC5BC,EAAWX,EAAOC,QAAQW,SAG1BC,EAAoBC,EAAiBP,EAAUE,EAAYL,EAAUO,GAGrEI,EAAS,GAAIrB,QAAOC,KAAKqB,QAC3BC,SAAUf,EACVT,IAAKA,EACLyB,MAAOb,IAILc,EAAa,GAAIzB,QAAOC,KAAKyB,YAC/BC,QAASR,GAIXnB,QAAOC,KAAK2B,MAAMC,YAAYR,EAAQ,QAAS,WAC7C,MAAOI,GAAWK,KAAK/B,EAAKsB,KAI9BA,EAAOU,WAAaN,EACpB1B,EAAII,QAAQ6B,KAAKX,GAGjBA,EAAOY,OAAOlC,KAIhBmC,OAAOjC,KAAK+B,KAAKjC,GAGnBC,OAAOC,KAAK2B,MAAMO,eAAeD,OAAQ,OAAQ9C,KAYrD,QAASgC,GAAiBI,EAAOG,EAASS,EAASC,GACjD,MAAO,mGAAqGA,EAAQ,oGAAsGb,EAAQ,6CAA+CG,EAAU,kCAAoCS,EAAU,mDAtG3UF,OAAOjC,OAEP,IAAIlB,GAAcuD,SAASjC,uBAAuB,WAClDvB,GAAQC,aAsGG","file":"wp-mapit.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n// make maps available on the window\n'use strict';\n\nwindow.maps = [];\n\nvar mapElements = document.getElementsByClassName('wp-mapit');\naddMaps(mapElements);\n\n/**\n * Creates all maps for a page\n * @param mapElements\n */\nfunction addMaps(mapElements) {\n\n  // cut off if the page has no maps\n  if (mapElements.length < 1) return;\n\n  Array.prototype.forEach.call(mapElements, function (mapEl) {\n\n    function initialize() {\n\n      // map options\n      // @todo: allow user to pass options\n      var mapOptions = {\n        center: { lat: 28.9932355, lng: -9.9536244 },\n        zoom: 2,\n        streetViewControl: false,\n        mapTypeControl: false,\n        panControl: false\n      };\n\n      // attach map to canvas\n      var mapCanvas = mapEl.querySelector('.wp-mapit-map');\n      var map = new google.maps.Map(mapCanvas, mapOptions);\n\n      // attach markers to map object\n      map.markers = [];\n\n      var dataElements = mapEl.getElementsByClassName('wp-mapit-location');\n      Array.prototype.forEach.call(dataElements, function (dataEl) {\n\n        // coordinates\n        var lat = dataEl.dataset['mapit_lat'];\n        var lng = dataEl.dataset['mapit_long'];\n        var myLatlng = new google.maps.LatLng(lat, lng);\n\n        // location\n        var address = dataEl.dataset['mapit_address'];\n        var city = dataEl.dataset['mapit_city'];\n        var state = dataEl.dataset['mapit_state'];\n        var zip = dataEl.dataset['mapit_zip'];\n        var country = dataEl.dataset['mapit_country'];\n        var fullAddr = dataEl.dataset['mapit_full_addr'];\n\n        // location content\n        var locId = dataEl.dataset.locid;\n        var locTitle = dataEl.dataset.loctitle;\n        var locContent = dataEl.dataset.loccontent;\n        var locImage = dataEl.dataset.locimage;\n\n        // infowindow content\n        var infoWindowContent = infoWindowMarkup(locTitle, locContent, fullAddr, locImage);\n\n        // create a marker\n        var marker = new google.maps.Marker({\n          position: myLatlng,\n          map: map,\n          title: locId\n        });\n\n        // create an infowindow\n        var infowindow = new google.maps.InfoWindow({\n          content: infoWindowContent\n        });\n\n        // todo: toggle based on option\n        google.maps.event.addListener(marker, 'click', function () {\n          return infowindow.open(map, marker);\n        });\n\n        // add infoWindow to marker\n        marker.infoWindow = infowindow;\n        map.markers.push(marker);\n\n        // place marker on map\n        marker.setMap(map);\n      });\n\n      // keep track of maps\n      window.maps.push(map);\n    }\n\n    google.maps.event.addDomListener(window, 'load', initialize);\n  });\n}\n\n/**\n * Returns markup for infoWidow\n * @param title\n * @param content\n * @param address\n * @param image\n * @returns {*}\n */\nfunction infoWindowMarkup(title, content, address, image) {\n  return '<div class=\"mapit-location\">\\n            <div class=\"featured-image\">\\n              <img src=\"' + image + '\">\\n            </div>\\n            <div class=\"location-info\">\\n              <h2 class=\"title\">' + title + '</h2>\\n              <div class=\"content\">' + content + '</div>\\n              <address>' + address + '</address>\\n            </div>\\n          </div>';\n}\n\n},{}]},{},[1]);\n"],"sourceRoot":"/source/"}